---
layout: post
title:  "My Time in Formula Student"
image:
  path: /media/ecurie/eace08.jpg
  alt: eace08 in action
---

## What is Formula Student?


Formula Student is a global engineering competition in which university students design, build, and race formula-style cars. The competition challenges teams to showcase their technical skills, innovation, and teamwork.

The goal of Formula Student is to provide students with hands-on experience in engineering, project management, and teamwork. It allows them to apply their theoretical knowledge to real-world challenges and gain practical skills that are highly valued in the automotive industry.

Participating teams are required to design and manufacture their own vehicle, considering factors such as aerodynamics, chassis design, powertrain, suspension, electronics, performance, cost, and, as of the past few years, the autonomous driving system. This is taken under close scrutiny by professionals from the automotive world, and forms part of the competition outcome, next to the actual spectacular racing events. They also need to develop a business plan and present it to a panel of judges, demonstrating their understanding of the market and financial aspects of the project. More details can be found [here](https://www.ecurie-aix.de/en/about-us/competition/formula-student).

Formula Student competitions take place all around the world, attracting teams from prestigious universities and technical institutions. It is a platform for students to network with industry professionals and showcase their talents. One of the biggest Formula Student competitions is the [Formula Student Germany](https://www.formulastudent.de/fsg/), whose 2019 event also formed the pinnacle of my time in Formula Student.


## My Formula Student Journey  

### How It All Started

When I started studying in 2016, I immediately felt that it was not enough. I was learning how to look at electric circuits on paper. I was learning how to write programs. On paper. It dawned on me that once I try to start earning money in the automation sector, I would sit there with a task from my employer and not be able to even comprehend what I am required to do. Not to mention ever starting a business on my own. 

So when, in my fourth semester, a friend of mine came along with the proposition of joining this crazy competition, where highly intelligent students build space-ship-esque racing cars accelerating to 100km/h in three seconds, I decided that this was exactly what I was looking for. I felt like I had absolutely no merit to even apply, but what did I have to lose? Especially when considering the fact, that this formula student team from Aachen, aptly named *<a href="#" class="magic-button" title="ðŸ‡«ðŸ‡· Racing horse stable">Ecurie </a> <a href="#" class="magic-button" title="ðŸ‡«ðŸ‡· Aachen">Aix</a>* (after an actual local racing horse stable), was in the process of building up a group to equip one of their older vehicles to race autonomously, and they happened to be looking for a software developer, I decided that this was right down my alley.   

Note: I was not a software developer.  

 All experience I had were a tiny bit of C++ I learned during labs at the university, and whatever I had programmed on paper. But as this role was pretty much exactly in line with my passions for "anything that does things by itself", I applied.

### Becoming a Driverless Software Engineer

So there I was, in *Ecurie Aix's* workshop, sitting face to face with the group leader of the driverless group. I was honest about my experience. But he was positively convinced by my guarantee that I could learn whatever I had to to fulfil my tasks. And as the driverless group currently consisted only of a very small number of people (3), and there were many roles to be filled, I was given the chance. Knowing little of the driverless pipeline as of then, and given my lack of experience in software, I was given the small and simple task of creating a simultaneous localization and mapping system for the vehicle. *Disclaimer:* It was not simple.

### Designing the System

#### Requirement Overview

Before I delve into our development process, let me provide a quick overview of how the driverless competition worked back then. While nowadays the Ecurie Aix vehicle is capable of driving both autonomously and with a driver, during my time there we had equipped a car from a previous year with sensors, a proceccing unit, actuators and various other devices to enable the car to drive autonomously. 

![Test Track](/media/ecurie/Ecurie%20Test%20Track.jpg)

The race track is bounded by traffic cones, blue ones on the left, yellow ones on the right. Based on these, the vehicle must find its way through it as quickly and destroying as few cones as possible, through this track. Further disciplines are acceleration along a straight path, and skid pad, where the vehicle has to perform two left circles, then two right circles, then automatically come to a stop. See [here](https://www.ecurie-aix.de/en/about-us/competition/formula-student) for more information.  
No matter the state of the physical system, we nevertheless had to perform well in the theoretical design of the system, as this also granted many points in the competition, during the so-called "design event".

#### Development

With these requirements in mind, we set out on the huge journey ahead of us. Not knowing much about actual engineering procedures, requirement analysis and concept development, everyone had their task and went at it. Not knowing anything about localization and mapping, I decided to start by brushing up on some of the necessary theory. Boy, oh boy was I wrong when happily threw my stochastics and statistics material out of the window after finishing high school. I read up on all the <a href="#" class="magic-button" title="Simultaneous Localization And Mapping">SLAM</a>  approaches and had to decide what to use. This was a tough decision, as there are many, and I had to try find an algorithm that would harmonize with the sensors we had on board, and that wouldn't gulp up the entire system's processing power. A further aspect to consider was using an algorithm I actually sort of understood. What seemed a simple matter of saving the positions of some traffic cones turned out to be a highly complex, non-deterministic kind of "chicken-or-egg" problem: You can't create a map of your surroundings, if you don't know your location, and you can't know your location, if you don't have a map.
After days of trying to bring the theory into an actual program, I decided to just start googling. Which was definitely the correct approach. Little had I known before, how much code and resources there are already out there. So now I had to decide wether to use C++ or Python...both were <a href="#" class="magic-button" title="Robot Operating System">ROS</a> capable, which was what our system would be based on. I decided to go with C++, because I had heard from somewhere that it is faster. Back then, I didn't know why, but as SLAM seemed to be such a computationally expensive task, it seemed like a good choice. All the while familiarizing myself with Git, ROS (a set of software libraries used for robotics development), and C++ itself.

I decided to go for the so-called FastSLAM algorithm. It seemed intuitive and fast, but it turned out especially as computationally expensive and complicated to implement. So I worked and worked and worked and worked and worked and worked and worked (needless to say, my actual studies suffered a little). Having a growing feeling of being out of my depth with this humongous task, I spent days and nights sitting and programming, debugging, both at home and at the Ecurie Aix workshop, together with other team members. Summer was turning into autumn and winter, back to spring, and the first nuances of a working program started showing. Little did I know that the "real" and most intense still ahead, come testing the system with real world data. 

### Testing the System

We now had a bunch of algorithms. Perception, which enables the vehicle to sense its surroundings and determine the location of the traffic cones outlining the race track, with respect to the vehicle, localization, mapping, path planning and control, which causes the vehicle to follow the planned path. All this now needed to be tested in real life, as no one really knew if what they had written actually worked. Our plan was to seat a driver in the car who then drives a few laps, with all sensors running, and recording so-called Rosbags. This basically saves the recorded data, that can then be played back afterwards and fed into our algorithms. Only once these were tested could we even begin to actually let the vehicle drive autonomously. But as the actual vehicle wasn't fully equipped as of yet, we settled on a different solution to start with. Next to our workshop, there was a huge container with metal waste, among which we found and retrieved, with strenuous physical effort, an old airport luggage cart. We rigged it with all sensors we wanted and could test in this way and added sophisticated waterproofing. Take a look for yourself.   

![Luggage Cart](/media/ecurie/luggage%20cart.JPG) 

As we had a large tarred area available to us, which belonged to a local institute, off we went. On a rainy day, we gathered enough data to begin testing our algorithms. A short time later, when the weather had started getting warmer and all the sensors were rigged to the actual vehicle, we put this on the test track as well. In the initial tests, we still pushed the vehicle, as it was not ready to drive yet (even with a driver). But in any case, it was now that we actually got to do the exciting stuff!

<figure>
  <img src="/media/ecurie/static test.jpg" alt="Static Test">
  <figcaption>Static Test</figcaption>
</figure>

Which was when I discovered, how much work I still had ahead of me. 

#### ASV

Now we were under some time pressure. Some competitions required, that we send in a video of our vehicle, driving in a regulated "U" shape, also showing the internal workings of the autonomous system. This was called the *Autonomous System Vehicle* (ASV). It might have been around two or three weeks to go before the deadline, and our vehicle had not moved a single millimeter, neither by itself, nor with a driver. So from then on, we tested every day from sunrise to 08:00, and from 17:00 until sunset, the times in which we were legally allowed on the track.

On top of that, I had discovered that my localization and mapping system somehow wasn't working at all. A rough location estimation was possible, but that was only through wheel odometry, which determines how far the wheels have turned, which is also very prone to drift. Additionally, the computational complexity of the algorithm I chose was coming to show. I had the ability to tweak the algorithm in a significant way, lowering its complexity, but with that came a drastic loss of accuracy (which, at this point, wasn't really a given anyway). And as the location (not so much the map at this point) was vital for this video to happen, I worked all day and often all night to get it going (this also caused the relationship I was leading then to fall apart). My first attempts at improving the system looked like this: 

<figure>
  <img src="/media/ecurie/Trying to improve SLAM.jpg" alt="Improving SLAM">
  <figcaption>Improving SLAM</figcaption>
</figure>

Take note that this is supposed to represent the track setup from the static test (see image above). For me, this was a big win nevertheless. The ASV also came together, as the map was not needed for it, and our qualification secured. My algorithm also kept improving further. 

<img src="media/ecurie/Improving SLAM.jpg" alt="Improving SLAM" style="width: 48%; margin-right: 1%" />
<img src="media/ecurie/Map.jpg" alt="First Proper Map" style="width: 48%;" />

### Roll-Out
### Peak of the Season: Participating in the Competitions
#### Qualifying Phase
### Excursions
#### Wolfsburg
#### ARWo
#### ZF RaceCamp
#### VW Ehra
### Life in the workshop

